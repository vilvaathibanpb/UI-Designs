{"version":3,"sources":["../../lib/marketing.survey.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;AAGA,IAAM,OAAO,mBAAb;;IAEqB,e;AACpB;;;;;;;;AAQA,0BAAa,EAAb,EAAiB,MAAjB,EAAyB,KAAzB,EAAiC;AAAA;;AAChC,MAAK,CAAE,EAAP,EAAY;AACX,SAAM,IAAI,SAAJ,CAAe,sCAAf,CAAN;AACA;;AAED,MAAK,EAAI,gBAAgB,eAApB,CAAL,EAA6C;AAC5C,UAAO,IAAI,eAAJ,CAAqB,EAArB,EAAyB,MAAzB,EAAiC,KAAjC,CAAP;AACA;;AAED,MAAK,QAAO,MAAP,uDAAO,MAAP,OAAkB,QAAvB,EAAkC;AACjC,QAAK,KAAL,GAAa,MAAb;AACA,GAFD,MAEO;AACN,QAAK,OAAL,GAAe,MAAf;AACA,QAAK,KAAL,GAAa,KAAb;AACA;;AAED,OAAK,GAAL,GAAW,EAAX;AACA,OAAK,UAAL,GAAkB,EAAlB;AACA;;;;4BAEU,M,EAAS;AACnB,QAAK,OAAL,GAAe,MAAf;AACA,UAAO,IAAP;AACA;;;8BAEY,G,EAAK,K,EAAQ;AACzB,QAAK,UAAL,GAAkB,sBACjB,EADiB,EAEjB,KAAK,UAFY,oCAGb,GAHa,EAGN,KAHM,EAAlB;AAKA,UAAO,IAAP;AACA;;;+BAEa,S,EAAY;AACzB,QAAK,UAAL,GAAkB,sBACjB,EADiB,EAEjB,KAAK,UAFY,EAGjB,SAHiB,CAAlB;AAKA,UAAO,IAAP;AACA;;AAED;;;;;;;;;;;2BAQoC;AAAA,OAA5B,KAA4B,uEAApB,EAAoB;AAAA,OAAhB,IAAgB,uEAAT,EAAS;AAAA,OAAL,EAAK;;AACnC,QAAK,SAAL,GAAiB,KAAK,GAAtB;AACA,QAAK,OAAL,GAAe,KAAK,OAAL,IAAgB,KAAK,OAApC;AACA,QAAK,gBAAL,GAAwB,KAAK,gBAAL,IAAyB,KAAK,UAAtD;AACA,UAAO,KAAK,KAAL,CAAW,GAAX,CAAe,IAAf,MAAyB,IAAzB,EAAkC,KAAlC,EAAyC,IAAzC,EAA+C,EAA/C,CAAP;AACA;;;;;kBAjEmB,e","file":"marketing.survey.js","sourcesContent":["/**\n * Module vars\n */\nconst root = '/marketing/survey';\n\nexport default class MarketingSurvey {\n\t/**\n\t * `MarketingSurvey` constructor.\n\t *\n\t * @param {String} id - survey identification\n\t * @param {String} [siteId] - site identification\n\t * @param {WPCOM} wpcom - wpcom instance\n\t * @return {Undefined} undefined\n\t */\n\tconstructor( id, siteId, wpcom ) {\n\t\tif ( ! id ) {\n\t\t\tthrow new TypeError( '`id` survey is not correctly defined' );\n\t\t}\n\n\t\tif ( ! ( this instanceof MarketingSurvey ) ) {\n\t\t\treturn new MarketingSurvey( id, siteId, wpcom );\n\t\t}\n\n\t\tif ( typeof siteId === 'object' ) {\n\t\t\tthis.wpcom = siteId;\n\t\t} else {\n\t\t\tthis._siteId = siteId;\n\t\t\tthis.wpcom = wpcom;\n\t\t}\n\n\t\tthis._id = id;\n\t\tthis._responses = {};\n\t}\n\n\tsetSiteId( siteId ) {\n\t\tthis._siteId = siteId;\n\t\treturn this;\n\t}\n\n\taddResponse( key, value ) {\n\t\tthis._responses = Object.assign(\n\t\t\t{},\n\t\t\tthis._responses,\n\t\t\t{ [ key ]: value }\n\t\t);\n\t\treturn this;\n\t}\n\n\taddResponses( responses ) {\n\t\tthis._responses = Object.assign(\n\t\t\t{},\n\t\t\tthis._responses,\n\t\t\tresponses\n\t\t);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Submit a marketing survey.\n\t *\n\t * @param {Object} [query] - query object parameter\n\t * @param {Object} [body] - body object parameter\n\t * @param {Function} [fn] - callback function\n\t * @return {Promise} Promise\n\t */\n\tsubmit( query = {}, body = {}, fn ) {\n\t\tbody.survey_id = this._id;\n\t\tbody.site_id = body.site_id || this._siteId;\n\t\tbody.survey_responses = body.survey_responses || this._responses;\n\t\treturn this.wpcom.req.post( `${ root }`, query, body, fn );\n\t}\n}\n"]}