{"version":3,"sources":["../../lib/batch.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;IAAM,K;AACL;;;;;;AAMA,gBAAa,KAAb,EAAqB;AAAA;;AACpB,MAAK,EAAI,gBAAgB,KAApB,CAAL,EAAmC;AAClC,UAAO,IAAI,KAAJ,CAAW,KAAX,CAAP;AACA;;AAED,OAAK,KAAL,GAAa,KAAb;AACA,OAAK,IAAL,GAAY,EAAZ;AACA;;AAED;;;;;;;;;;sBAMK,G,EAAM;AACV,QAAK,IAAL,CAAU,IAAV,CAAgB,GAAhB;AACA,UAAO,IAAP;AACA;;AAED;;;;;;;;;;wBAOsB;AAAA,OAAjB,KAAiB,uEAAT,EAAS;AAAA,OAAL,EAAK;;AACrB,OAAK,eAAe,OAAO,KAA3B,EAAmC;AAClC,SAAK,KAAL;AACA,YAAQ,EAAR;AACA;;AAED;AACA,SAAM,IAAN,GAAa,KAAK,IAAlB;;AAEA,UAAO,KAAK,KAAL,CAAW,GAAX,CAAe,GAAf,CAAoB,QAApB,EAA8B,KAA9B,EAAqC,EAArC,CAAP;AACA;;;;;AACD;;AAED;;;kBAGe,K","file":"batch.js","sourcesContent":["class Batch {\n\t/**\n\t * Create a `Batch` instance\n\t *\n\t * @param {WPCOM} wpcom - wpcom instance\n\t * @return {null} null\n\t */\n\tconstructor( wpcom ) {\n\t\tif ( ! ( this instanceof Batch ) ) {\n\t\t\treturn new Batch( wpcom );\n\t\t}\n\n\t\tthis.wpcom = wpcom;\n\t\tthis.urls = [];\n\t}\n\n\t/**\n\t * Add url to batch requests\n\t *\n\t * @param {String} url - endpoint url\n\t * @return {Batch} batch instance\n\t */\n\tadd( url ) {\n\t\tthis.urls.push( url );\n\t\treturn this;\n\t}\n\n\t/**\n\t * Run the batch request\n\t *\n\t * @param {Object} [query] - optional query parameter\n\t * @param {Function} fn - callback\n\t * @return {Promise} Promise\n\t */\n\trun( query = {}, fn ) {\n\t\tif ( 'function' === typeof query ) {\n\t\t\tfn = query;\n\t\t\tquery = {}\n\t\t}\n\n\t\t// add urls to query object\n\t\tquery.urls = this.urls;\n\n\t\treturn this.wpcom.req.get( '/batch', query, fn );\n\t}\n};\n\n/**\n * Expose `Batch` module\n */\nexport default Batch;\n"]}